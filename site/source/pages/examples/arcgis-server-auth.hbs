---
title: ArcGIS Server username/password
description: Example showing authentication with ArcGIS Server via a username and password. In this example a username and password are hardcoded in.
layout: example.hbs
---

<div id="map"></div>

<script>
  var map = new L.Map('map').setView([34.326, -117.697], 12);

  L.esri.basemapLayer('Topographic').addTo(map);

  function serverAuth(callback){
    L.esri.post('http://3021-ggn-gis:6080/arcgis/tokens/generateToken', {
      username: 'sarw',
      password: 'sarw123',
      f: 'json',
      expiration: 86400,
      client: 'referer',
      referer: window.location.origin
    }, callback);
  }

  serverAuth(function(error, response){
    var dl = L.esri.dynamicMapLayer('http://3021-ggn-gis:6080/arcgis/rest/services/BSESWithoutOwnership/MapServer', {
      opacity: 1,
      token:  response.token
    }).addTo(map);

    dl.on('authenticationrequired', function (e) {
      serverAuth(function(error, response){
        e.authenticate(response.token);
      });
    });
  });
</script>
